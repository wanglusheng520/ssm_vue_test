<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beneway.common.dao.contractinfo.ContractInfoDao">
    <resultMap id="res" type="com.beneway.common.entity.contractinfo.ContractInfo"></resultMap>

    <select id="queryPage" resultMap="res">
        select t.* from contract_info t
        where 1=1 and t.is_delete = 0
        <include refid="pageQuerySearch"></include>
        order by t.contract_status,create_time desc
    </select>

    <sql id="pageQuerySearch">
        <if test="param.attr != null and param.attr != ''">
            and t.contract_attr = #{param.attr}
        </if>
        <if test="param.type != null and param.type != ''">
            and t.contract_type = #{param.type}
        </if>
        <if test="param.keyword != null and param.keyword != ''">
            and
            (
                t.contract_name like concat('%', #{param.keyword}, '%')
                or
                t.contractnumber like concat('%', #{param.keyword}, '%')
            )
        </if>
    </sql>


</mapper>
