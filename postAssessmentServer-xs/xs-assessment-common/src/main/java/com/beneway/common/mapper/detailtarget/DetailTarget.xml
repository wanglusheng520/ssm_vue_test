<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beneway.common.dao.detailtarget.DetailTargetDao">
    <select id="yqzb" resultType="com.beneway.common.entity.detailtarget.DetailTarget">
        select * from detail_target where
        id in
        <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">
            #{item}
        </foreach>
        and (type = '1' or type = '2')
    </select>

    <select id="queryPage" resultType="com.beneway.common.entity.detailtarget.vo.DetailTargetVo">
        SELECT
        t.*
        FROM
        detail_target  as t
        where 1 = 1
        <include refid="deleteFlag"></include>
        <include refid="querySql"></include>
    </select>
    <sql id="deleteFlag">
        and t.is_del = 0
    </sql>
    <sql id="querySql">
        <if test="param.typeFirst != null and param.typeFirst != ''">
            and t.major_indicators_id in (select id from major_indicators where type_first=#{param.typeFirst})
        </if>
        <if test="param.majorIndicatorsId != null and param.majorIndicatorsId != ''">
            and t.major_indicators_id = #{param.majorIndicatorsId}
        </if>
    </sql>
</mapper>