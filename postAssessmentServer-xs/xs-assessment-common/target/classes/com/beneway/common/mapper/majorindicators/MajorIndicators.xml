<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beneway.common.dao.majorindicators.MajorIndicatorsDao">
    <resultMap id="res" type="com.beneway.common.entity.majorindicators.MajorIndicators"></resultMap>

    <select id="queryPage" resultType="com.beneway.common.entity.majorindicators.vo.MajorIndicatorsVo">
        SELECT
            t.*
        FROM
            major_indicators  as t
        where 1 = 1
            <include refid="delSql"></include>
            <include refid="querySql"></include>

    </select>

    <sql id="delSql">
        and t.is_del = 0
    </sql>
    <sql id="querySql">
        <if test="param.type != null and param.type != ''">
            and t.type = #{param.type}
        </if>
        <if test="param.typeFirst != null and param.typeFirst != ''">
            and t.type_first = #{param.typeFirst}
        </if>
    </sql>

    <select id="selectMar" resultType="integer">
        select  count(1) from major_indicators where 1 = 1
        <if test="param.type != null and param.type != ''">
            and type = #{param.type}
        </if>
    </select>

    <select id="selectDetail" resultType="integer">
        select  count(1) from major_indicators as a , detail_target as b where  a.id = b.major_indicators_id
        <if test="param.type != null and param.type != ''">
            and a.type = #{param.type}
        </if>
    </select>

</mapper>